window.VRClient=function(){function e(e){var o=this;o.onRenderModeChange=null,o.getVR=new Promise(function(e,n){navigator.getVRDevices?navigator.getVRDevices().then(function(t){for(var i=0;i<t.length;++i)if(t[i]instanceof HMDVRDevice&&!o.hmdDevice&&(o.hmdDevice=t[i]),t[i]instanceof PositionSensorVRDevice&&t[i].hardwareUnitId==o.hmdDevice.hardwareUnitId&&!o.positionDevice){o.positionDevice=t[i];break}return o.hmdDevice&&o.positionDevice?(console.log("VR devices detected"),void e({hmd:o.hmdDevice,position:o.positionDevice})):void n("no VR devices found!")})["catch"](n):console.warn("no VR implementation found!")}),o.wait=new Promise(function(e){o.startDemo=e}),window.addEventListener("message",function(e){var n=e.data;if(n.type)switch(n.type){case"start":o.startDemo();break;case"renderMode":o.setRenderMode(n.data);break;case"onZeroSensor":o.zeroSensor();break;case"onBlur":"function"==typeof o.onBlur&&o.onBlur();break;case"onFocus":"function"==typeof o.onFocus&&o.onFocus()}},!1)}return e.prototype.sendMessage=function(e,o){window.parent!==window&&window.parent.postMessage({type:e,data:o},"*")},e.prototype.load=function(e){this.sendMessage("load",e)},e.prototype.progress=function(e){this.sendMessage("progress",e)},e.prototype.ready=function(){return this.sendMessage("ready"),this.wait},e.prototype.ended=function(){this.sendMessage("ended")},e.prototype.zeroSensor=function(){var e=this;e.getVR.then(function(){"function"==typeof e.onZeroSensor&&e.onZeroSensor()})},e.prototype.setRenderMode=function(e){var o=this;"function"==typeof o.onRenderModeChange&&o.onRenderModeChange(e)},e.renderModes=e.prototype.renderModes={mono:1,stereo:2,vr:3},new e}();